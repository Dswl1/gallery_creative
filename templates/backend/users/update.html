{% extends 'backend/index.html' %}
{% block content %}

<div class="max-w-4xl mx-auto">

  <div class="bg-white/80 backdrop-blur-xl shadow-2xl rounded-3xl p-8">

    <!-- HEADER -->
    <div class="relative w-36 h-36 mx-auto rounded-full overflow-hidden group">
      <img id="preview" src="{% if user.profile %}
              {{ url_for('static', filename='uploads/' ~ user.profile) }}
            {% else %}
              {{ url_for('static', filename='assets/profile.png') }}
            {% endif %}" class="w-full h-full object-cover">

      <label for="profile" class="absolute inset-0 bg-black/40
                flex items-center justify-center
                text-white text-sm font-semibold
                opacity-0 group-hover:opacity-100
                transition cursor-pointer">
        Ganti Foto
      </label>
    </div>



    <!-- FORM -->
    <form action="{{ url_for('profile_edit') }}" method="POST" enctype="multipart/form-data">

      <input type="file" id="profile" name="profile" accept="image/*" class="hidden" onchange="previewImage(event)">
      <!-- GRID -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <div>
          <label class="text-sm text-gray-500">Username</label>
          <input type="text" name="username" value="{{ user.username }}" class="w-full mt-1 px-4 py-3 rounded-xl border
                   focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <div>
          <label class="text-sm text-gray-500">Email</label>
          <input type="email" name="email" value="{{ user.email }}" class="w-full mt-1 px-4 py-3 rounded-xl border
                   focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <div>
          <label class="text-sm text-gray-500">No HP</label>
          <input type="tel" name="phone" value="{{ user.phone }}" class="w-full mt-1 px-4 py-3 rounded-xl border
                   focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        {% if session['role'] == 'admin' %}
        <div>
          <label class="text-sm text-gray-500">Role</label>
          <select id="role" name="role" class="w-full rounded-xl border border-gray-300
                               px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
            <option value="admin">Admin</option>
            <option value="user">User</option>
          </select>
        </div>
        {% endif %}
      </div>

      <!-- PASSWORD -->
      <div>
        <label class="text-sm text-gray-500">Password Baru</label>
        <input type="password" name="password" placeholder="Kosongkan jika tidak diganti" class="w-full mt-1 px-4 py-3 rounded-xl border
                 focus:ring-2 focus:ring-blue-400 focus:outline-none">
      </div>

      <!-- ACTION -->
      <div class="pt-6 flex justify-end gap-4">

        <a href="{{ url_for('admin_users') }}" class="px-6 py-3 rounded-xl border border-gray-300
                  text-gray-600 hover:bg-gray-100 transition">
          Batal
        </a>

        <button type="submit" class="px-8 py-3 rounded-xl
                 bg-blue-500 text-white font-semibold
                 hover:bg-blue-600 hover:shadow-lg
                 transition">
          ðŸ’¾ Simpan Perubahan
        </button>

      </div>

    </form>

  </div>
</div>


{% endblock %}